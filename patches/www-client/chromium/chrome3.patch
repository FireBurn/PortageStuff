From 7705b1932bbc066ef50be00dc3cc06fb6344880e Mon Sep 17 00:00:00 2001
From: Mike Lothian <mike@fireburn.co.uk>
Date: Thu, 4 May 2023 22:35:31 +0100
Subject: [PATCH] GCC 13, libstdc++ fixes

---
 base/debug/profiler.h                                           | 2 ++
 cc/trees/target_property.cc                                     | 2 ++
 chrome/browser/privacy_budget/encountered_surface_tracker.h     | 1 +
 components/autofill/core/browser/autofill_ablation_study.h      | 1 +
 components/crash/core/app/crash_reporter_client.h               | 1 +
 .../feature_engagement/internal/event_storage_validator.h       | 1 +
 components/omnibox/browser/on_device_head_model.h               | 1 +
 .../core/browser/generation/password_generator.h                | 1 +
 components/payments/content/utility/fingerprint_parser.h        | 1 +
 components/viz/common/view_transition_element_resource_id.h     | 1 +
 device/base/synchronization/one_writer_seqlock.h                | 1 +
 gpu/config/gpu_feature_info.h                                   | 1 +
 net/cert/pki/string_util.h                                      | 1 +
 net/cookies/cookie_inclusion_status.h                           | 1 +
 net/third_party/quiche/src/quiche/quic/core/crypto/quic_hkdf.h  | 1 +
 .../quiche/src/quiche/quic/core/quic_connection_id.h            | 1 +
 pdf/document_attachment_info.h                                  | 1 +
 third_party/abseil-cpp/absl/strings/string_view.h               | 1 +
 .../blink/public/common/bluetooth/web_bluetooth_device_id.h     | 1 +
 third_party/dawn/src/dawn/native/stream/ByteVectorSink.h        | 1 +
 .../openscreen/src/discovery/dnssd/public/dns_sd_instance.h     | 1 +
 .../openscreen/src/discovery/dnssd/public/dns_sd_txt_record.h   | 1 +
 third_party/openscreen/src/util/base64.h                        | 1 +
 third_party/pdfium/constants/annotation_flags.h                 | 2 ++
 third_party/perfetto/include/perfetto/ext/base/uuid.h           | 1 +
 third_party/ruy/src/ruy/profiler/instrumentation.h              | 2 ++
 third_party/s2cellid/src/s2/util/math/vector.h                  | 1 +
 third_party/swiftshader/src/Device/RoutineCache.hpp             | 2 ++
 .../tflite/src/tensorflow/lite/kernels/internal/spectrogram.cc  | 1 +
 third_party/webrtc/rtc_base/third_party/base64/base64.h         | 1 +
 ui/events/types/scroll_types.h                                  | 2 ++
 ui/gfx/geometry/linear_gradient.h                               | 1 +
 ui/gfx/geometry/vector3d_f.h                                    | 1 +
 33 files changed, 39 insertions(+)

diff --git a/base/debug/profiler.h b/base/debug/profiler.h
index 5f0dead..1543d61 100644
--- a/base/debug/profiler.h
+++ b/base/debug/profiler.h
@@ -7,6 +7,8 @@
 
 #include <stddef.h>
 
+#include <stdint.h>
+
 #include <string>
 
 #include "base/base_export.h"
diff --git a/cc/trees/target_property.cc b/cc/trees/target_property.cc
index f6e873a..714bd5e 100644
--- a/cc/trees/target_property.cc
+++ b/cc/trees/target_property.cc
@@ -2,6 +2,8 @@
 // Use of this source code is governed by a BSD-style license that can be
 // found in the LICENSE file.
 
+#include <cstdint>
+
 #include "cc/trees/target_property.h"
 
 #include "ui/gfx/animation/keyframe/target_property.h"
diff --git a/chrome/browser/privacy_budget/encountered_surface_tracker.h b/chrome/browser/privacy_budget/encountered_surface_tracker.h
index 012ca2c..d7d9eb6 100644
--- a/chrome/browser/privacy_budget/encountered_surface_tracker.h
+++ b/chrome/browser/privacy_budget/encountered_surface_tracker.h
@@ -5,6 +5,7 @@
 #ifndef CHROME_BROWSER_PRIVACY_BUDGET_ENCOUNTERED_SURFACE_TRACKER_H_
 #define CHROME_BROWSER_PRIVACY_BUDGET_ENCOUNTERED_SURFACE_TRACKER_H_
 
+#include <cstdint>
 #include <map>
 
 #include "base/containers/flat_set.h"
diff --git a/components/autofill/core/browser/autofill_ablation_study.h b/components/autofill/core/browser/autofill_ablation_study.h
index ada8121..35cce67 100644
--- a/components/autofill/core/browser/autofill_ablation_study.h
+++ b/components/autofill/core/browser/autofill_ablation_study.h
@@ -5,6 +5,7 @@
 #ifndef COMPONENTS_AUTOFILL_CORE_BROWSER_AUTOFILL_ABLATION_STUDY_H_
 #define COMPONENTS_AUTOFILL_CORE_BROWSER_AUTOFILL_ABLATION_STUDY_H_
 
+#include <cstdint>
 #include <string>
 
 class GURL;
diff --git a/components/crash/core/app/crash_reporter_client.h b/components/crash/core/app/crash_reporter_client.h
index 9f8f20d..ea7ad43 100644
--- a/components/crash/core/app/crash_reporter_client.h
+++ b/components/crash/core/app/crash_reporter_client.h
@@ -5,6 +5,7 @@
 #ifndef COMPONENTS_CRASH_CORE_APP_CRASH_REPORTER_CLIENT_H_
 #define COMPONENTS_CRASH_CORE_APP_CRASH_REPORTER_CLIENT_H_
 
+#include <cstdint>
 #include <string>
 
 #include "build/build_config.h"
diff --git a/components/feature_engagement/internal/event_storage_validator.h b/components/feature_engagement/internal/event_storage_validator.h
index 647a359..ed85a27 100644
--- a/components/feature_engagement/internal/event_storage_validator.h
+++ b/components/feature_engagement/internal/event_storage_validator.h
@@ -5,6 +5,7 @@
 #ifndef COMPONENTS_FEATURE_ENGAGEMENT_INTERNAL_EVENT_STORAGE_VALIDATOR_H_
 #define COMPONENTS_FEATURE_ENGAGEMENT_INTERNAL_EVENT_STORAGE_VALIDATOR_H_
 
+#include <cstdint>
 #include <string>
 
 namespace feature_engagement {
diff --git a/components/omnibox/browser/on_device_head_model.h b/components/omnibox/browser/on_device_head_model.h
index d512779..754e9cd 100644
--- a/components/omnibox/browser/on_device_head_model.h
+++ b/components/omnibox/browser/on_device_head_model.h
@@ -5,6 +5,7 @@
 #ifndef COMPONENTS_OMNIBOX_BROWSER_ON_DEVICE_HEAD_MODEL_H_
 #define COMPONENTS_OMNIBOX_BROWSER_ON_DEVICE_HEAD_MODEL_H_
 
+#include <cstdint>
 #include <string>
 #include <utility>
 #include <vector>
diff --git a/components/password_manager/core/browser/generation/password_generator.h b/components/password_manager/core/browser/generation/password_generator.h
index b0d621c..aa674d4 100644
--- a/components/password_manager/core/browser/generation/password_generator.h
+++ b/components/password_manager/core/browser/generation/password_generator.h
@@ -5,6 +5,7 @@
 #ifndef COMPONENTS_PASSWORD_MANAGER_CORE_BROWSER_GENERATION_PASSWORD_GENERATOR_H_
 #define COMPONENTS_PASSWORD_MANAGER_CORE_BROWSER_GENERATION_PASSWORD_GENERATOR_H_
 
+#include <cstdint>
 #include <string>
 
 
diff --git a/components/payments/content/utility/fingerprint_parser.h b/components/payments/content/utility/fingerprint_parser.h
index e798305..3c3f830 100644
--- a/components/payments/content/utility/fingerprint_parser.h
+++ b/components/payments/content/utility/fingerprint_parser.h
@@ -6,6 +6,7 @@
 #define COMPONENTS_PAYMENTS_CONTENT_UTILITY_FINGERPRINT_PARSER_H_
 
 #include <stddef.h>
+#include <stdint.h>
 
 #include <string>
 #include <vector>
diff --git a/components/viz/common/view_transition_element_resource_id.h b/components/viz/common/view_transition_element_resource_id.h
index fd0d06b..1e7b6a0 100644
--- a/components/viz/common/view_transition_element_resource_id.h
+++ b/components/viz/common/view_transition_element_resource_id.h
@@ -5,6 +5,7 @@
 #ifndef COMPONENTS_VIZ_COMMON_VIEW_TRANSITION_ELEMENT_RESOURCE_ID_H_
 #define COMPONENTS_VIZ_COMMON_VIEW_TRANSITION_ELEMENT_RESOURCE_ID_H_
 
+#include <cstdint>
 #include <string>
 #include <vector>
 
diff --git a/device/base/synchronization/one_writer_seqlock.h b/device/base/synchronization/one_writer_seqlock.h
index 528b668..e37a16b 100644
--- a/device/base/synchronization/one_writer_seqlock.h
+++ b/device/base/synchronization/one_writer_seqlock.h
@@ -6,6 +6,7 @@
 #define DEVICE_BASE_SYNCHRONIZATION_ONE_WRITER_SEQLOCK_H_
 
 #include <atomic>
+#include <cstdint>
 #include <type_traits>
 
 #include "base/atomicops.h"
diff --git a/gpu/config/gpu_feature_info.h b/gpu/config/gpu_feature_info.h
index 1a7028e..b9e951c 100644
--- a/gpu/config/gpu_feature_info.h
+++ b/gpu/config/gpu_feature_info.h
@@ -5,6 +5,7 @@
 #ifndef GPU_CONFIG_GPU_FEATURE_INFO_H_
 #define GPU_CONFIG_GPU_FEATURE_INFO_H_
 
+#include <cstdint>
 #include <string>
 #include <vector>
 
diff --git a/net/cert/pki/string_util.h b/net/cert/pki/string_util.h
index 1687b08..429f926 100644
--- a/net/cert/pki/string_util.h
+++ b/net/cert/pki/string_util.h
@@ -7,6 +7,7 @@
 
 #include "net/base/net_export.h"
 
+#include <cstdint>
 #include <string_view>
 #include <vector>
 
diff --git a/net/cookies/cookie_inclusion_status.h b/net/cookies/cookie_inclusion_status.h
index 51fb970..e8dd6d8 100644
--- a/net/cookies/cookie_inclusion_status.h
+++ b/net/cookies/cookie_inclusion_status.h
@@ -6,6 +6,7 @@
 #define NET_COOKIES_COOKIE_INCLUSION_STATUS_H_
 
 #include <bitset>
+#include <cstdint>
 #include <ostream>
 #include <string>
 #include <vector>
diff --git a/net/third_party/quiche/src/quiche/quic/core/crypto/quic_hkdf.h b/net/third_party/quiche/src/quiche/quic/core/crypto/quic_hkdf.h
index 6a300ed..3e30f1c 100644
--- a/net/third_party/quiche/src/quiche/quic/core/crypto/quic_hkdf.h
+++ b/net/third_party/quiche/src/quiche/quic/core/crypto/quic_hkdf.h
@@ -5,6 +5,7 @@
 #ifndef QUICHE_QUIC_CORE_CRYPTO_QUIC_HKDF_H_
 #define QUICHE_QUIC_CORE_CRYPTO_QUIC_HKDF_H_
 
+#include <cstdint>
 #include <vector>
 
 #include "absl/strings/string_view.h"
diff --git a/net/third_party/quiche/src/quiche/quic/core/quic_connection_id.h b/net/third_party/quiche/src/quiche/quic/core/quic_connection_id.h
index 4994349..b4e25fe 100644
--- a/net/third_party/quiche/src/quiche/quic/core/quic_connection_id.h
+++ b/net/third_party/quiche/src/quiche/quic/core/quic_connection_id.h
@@ -5,6 +5,7 @@
 #ifndef QUICHE_QUIC_CORE_QUIC_CONNECTION_ID_H_
 #define QUICHE_QUIC_CORE_QUIC_CONNECTION_ID_H_
 
+#include <cstdint>
 #include <string>
 #include <vector>
 
diff --git a/pdf/document_attachment_info.h b/pdf/document_attachment_info.h
index e0fffc2..095463f 100644
--- a/pdf/document_attachment_info.h
+++ b/pdf/document_attachment_info.h
@@ -5,6 +5,7 @@
 #ifndef PDF_DOCUMENT_ATTACHMENT_INFO_H_
 #define PDF_DOCUMENT_ATTACHMENT_INFO_H_
 
+#include <cstdint>
 #include <string>
 
 
diff --git a/third_party/abseil-cpp/absl/strings/string_view.h b/third_party/abseil-cpp/absl/strings/string_view.h
index eae11b2..0eacc93 100644
--- a/third_party/abseil-cpp/absl/strings/string_view.h
+++ b/third_party/abseil-cpp/absl/strings/string_view.h
@@ -30,6 +30,7 @@
 #include <algorithm>
 #include <cassert>
 #include <cstddef>
+#include <cstdint>
 #include <cstring>
 #include <iosfwd>
 #include <iterator>
diff --git a/third_party/blink/public/common/bluetooth/web_bluetooth_device_id.h b/third_party/blink/public/common/bluetooth/web_bluetooth_device_id.h
index 7a74887..058870e 100644
--- a/third_party/blink/public/common/bluetooth/web_bluetooth_device_id.h
+++ b/third_party/blink/public/common/bluetooth/web_bluetooth_device_id.h
@@ -6,6 +6,7 @@
 #define THIRD_PARTY_BLINK_PUBLIC_COMMON_BLUETOOTH_WEB_BLUETOOTH_DEVICE_ID_H_
 
 #include <array>
+#include <cstdint>
 #include <string>
 
 #include "third_party/blink/public/common/common_export.h"
diff --git a/third_party/dawn/src/dawn/native/stream/ByteVectorSink.h b/third_party/dawn/src/dawn/native/stream/ByteVectorSink.h
index 3b6016c..5537820 100644
--- a/third_party/dawn/src/dawn/native/stream/ByteVectorSink.h
+++ b/third_party/dawn/src/dawn/native/stream/ByteVectorSink.h
@@ -15,6 +15,7 @@
 #ifndef SRC_DAWN_NATIVE_STREAM_BYTEVECTORSINK_H_
 #define SRC_DAWN_NATIVE_STREAM_BYTEVECTORSINK_H_
 
+#include <cstdint>
 #include <ostream>
 #include <vector>
 
diff --git a/third_party/openscreen/src/discovery/dnssd/public/dns_sd_instance.h b/third_party/openscreen/src/discovery/dnssd/public/dns_sd_instance.h
index 5e89c05..b50d875 100644
--- a/third_party/openscreen/src/discovery/dnssd/public/dns_sd_instance.h
+++ b/third_party/openscreen/src/discovery/dnssd/public/dns_sd_instance.h
@@ -5,6 +5,7 @@
 #ifndef DISCOVERY_DNSSD_PUBLIC_DNS_SD_INSTANCE_H_
 #define DISCOVERY_DNSSD_PUBLIC_DNS_SD_INSTANCE_H_
 
+#include <cstdint>
 #include <string>
 #include <utility>
 #include <vector>
diff --git a/third_party/openscreen/src/discovery/dnssd/public/dns_sd_txt_record.h b/third_party/openscreen/src/discovery/dnssd/public/dns_sd_txt_record.h
index edf2c78..c23a927 100644
--- a/third_party/openscreen/src/discovery/dnssd/public/dns_sd_txt_record.h
+++ b/third_party/openscreen/src/discovery/dnssd/public/dns_sd_txt_record.h
@@ -5,6 +5,7 @@
 #ifndef DISCOVERY_DNSSD_PUBLIC_DNS_SD_TXT_RECORD_H_
 #define DISCOVERY_DNSSD_PUBLIC_DNS_SD_TXT_RECORD_H_
 
+#include <cstdint>
 #include <functional>
 #include <map>
 #include <set>
diff --git a/third_party/openscreen/src/util/base64.h b/third_party/openscreen/src/util/base64.h
index a7af9ec..ad009a4 100644
--- a/third_party/openscreen/src/util/base64.h
+++ b/third_party/openscreen/src/util/base64.h
@@ -5,6 +5,7 @@
 #ifndef UTIL_BASE64_H_
 #define UTIL_BASE64_H_
 
+#include <cstdint>
 #include <string>
 #include <vector>
 
diff --git a/third_party/pdfium/constants/annotation_flags.h b/third_party/pdfium/constants/annotation_flags.h
index 2ac244e..fa121de 100644
--- a/third_party/pdfium/constants/annotation_flags.h
+++ b/third_party/pdfium/constants/annotation_flags.h
@@ -5,6 +5,8 @@
 #ifndef CONSTANTS_ANNOTATION_FLAGS_H_
 #define CONSTANTS_ANNOTATION_FLAGS_H_
 
+#include <cstdint>
+
 namespace pdfium {
 namespace annotation_flags {
 
diff --git a/third_party/perfetto/include/perfetto/ext/base/uuid.h b/third_party/perfetto/include/perfetto/ext/base/uuid.h
index a23be40..3b3d5d5 100644
--- a/third_party/perfetto/include/perfetto/ext/base/uuid.h
+++ b/third_party/perfetto/include/perfetto/ext/base/uuid.h
@@ -18,6 +18,7 @@
 #define INCLUDE_PERFETTO_EXT_BASE_UUID_H_
 
 #include <array>
+#include <cstdint>
 #include <string>
 
 #include "perfetto/ext/base/optional.h"
diff --git a/third_party/ruy/src/ruy/profiler/instrumentation.h b/third_party/ruy/src/ruy/profiler/instrumentation.h
index c4df1e6..719b67d 100644
--- a/third_party/ruy/src/ruy/profiler/instrumentation.h
+++ b/third_party/ruy/src/ruy/profiler/instrumentation.h
@@ -18,7 +18,9 @@ limitations under the License.
 
 #ifdef RUY_PROFILER
 #include <cstdio>
+#include <cstdlib>
 #include <mutex>
+#include <string>
 #include <vector>
 #endif
 
diff --git a/third_party/s2cellid/src/s2/util/math/vector.h b/third_party/s2cellid/src/s2/util/math/vector.h
index ded669c..487edc3 100644
--- a/third_party/s2cellid/src/s2/util/math/vector.h
+++ b/third_party/s2cellid/src/s2/util/math/vector.h
@@ -22,6 +22,7 @@
 
 #include <algorithm>
 #include <cmath>
+#include <cstdint>
 #include <cstdlib>
 #include <iosfwd>
 #include <iostream>  // NOLINT(readability/streams)
diff --git a/third_party/swiftshader/src/Device/RoutineCache.hpp b/third_party/swiftshader/src/Device/RoutineCache.hpp
index 71046c3..4784d05 100644
--- a/third_party/swiftshader/src/Device/RoutineCache.hpp
+++ b/third_party/swiftshader/src/Device/RoutineCache.hpp
@@ -15,6 +15,8 @@
 #ifndef sw_RoutineCache_hpp
 #define sw_RoutineCache_hpp
 
+#include <cstdint>
+
 #include "System/LRUCache.hpp"
 
 #include "Reactor/Reactor.hpp"
diff --git a/third_party/tflite/src/tensorflow/lite/kernels/internal/spectrogram.cc b/third_party/tflite/src/tensorflow/lite/kernels/internal/spectrogram.cc
index a832962..3870071 100644
--- a/third_party/tflite/src/tensorflow/lite/kernels/internal/spectrogram.cc
+++ b/third_party/tflite/src/tensorflow/lite/kernels/internal/spectrogram.cc
@@ -16,6 +16,7 @@ limitations under the License.
 #include "tensorflow/lite/kernels/internal/spectrogram.h"
 
 #include <assert.h>
+#include <cstdint>
 #include <math.h>
 
 #include "third_party/fft2d/fft.h"
diff --git a/third_party/webrtc/rtc_base/third_party/base64/base64.h b/third_party/webrtc/rtc_base/third_party/base64/base64.h
index 4190a79..5a9285f 100644
--- a/third_party/webrtc/rtc_base/third_party/base64/base64.h
+++ b/third_party/webrtc/rtc_base/third_party/base64/base64.h
@@ -12,6 +12,7 @@
 #ifndef RTC_BASE_THIRD_PARTY_BASE64_BASE64_H_
 #define RTC_BASE_THIRD_PARTY_BASE64_BASE64_H_
 
+#include <cstdint>
 #include <string>
 #include <vector>
 
diff --git a/ui/events/types/scroll_types.h b/ui/events/types/scroll_types.h
index be6b277..dbe2e5c 100644
--- a/ui/events/types/scroll_types.h
+++ b/ui/events/types/scroll_types.h
@@ -5,6 +5,8 @@
 #ifndef UI_EVENTS_TYPES_SCROLL_TYPES_H_
 #define UI_EVENTS_TYPES_SCROLL_TYPES_H_
 
+#include <cstdint>
+
 namespace ui {
 
 enum class ScrollGranularity : uint8_t {
diff --git a/ui/gfx/geometry/linear_gradient.h b/ui/gfx/geometry/linear_gradient.h
index 65cd4cb..ab0ce58 100644
--- a/ui/gfx/geometry/linear_gradient.h
+++ b/ui/gfx/geometry/linear_gradient.h
@@ -6,6 +6,7 @@
 #define UI_GFX_LINEAR_GRADIENT_H_
 
 #include <array>
+#include <cstdint>
 #include <string>
 
 #include "ui/gfx/geometry/geometry_skia_export.h"
diff --git a/ui/gfx/geometry/vector3d_f.h b/ui/gfx/geometry/vector3d_f.h
index 2174b5f..753573f 100644
--- a/ui/gfx/geometry/vector3d_f.h
+++ b/ui/gfx/geometry/vector3d_f.h
@@ -10,6 +10,7 @@
 #ifndef UI_GFX_GEOMETRY_VECTOR3D_F_H_
 #define UI_GFX_GEOMETRY_VECTOR3D_F_H_
 
+#include <cstdint>
 #include <iosfwd>
 #include <string>
 
-- 
2.40.1

