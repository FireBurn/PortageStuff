From 15a9a6f5057eddf5ddf9ac11b3ecfb08d7fed216 Mon Sep 17 00:00:00 2001
From: Timothy Arceri <tarceri@itsqueeze.com>
Date: Mon, 25 Jun 2018 10:35:33 +1000
Subject: [PATCH 18/18] radeonsi: enable OpenGL 4.4 compat profile

---
 src/gallium/drivers/radeonsi/si_get.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/gallium/drivers/radeonsi/si_get.c b/src/gallium/drivers/radeonsi/si_get.c
index a99626416e..96ff2a9e46 100644
--- a/src/gallium/drivers/radeonsi/si_get.c
+++ b/src/gallium/drivers/radeonsi/si_get.c
@@ -210,13 +210,12 @@ static int si_get_param(struct pipe_screen *pscreen, enum pipe_cap param)
 		return 4;
 
 	case PIPE_CAP_GLSL_FEATURE_LEVEL:
+	case PIPE_CAP_GLSL_FEATURE_LEVEL_COMPATIBILITY:
 		if (sscreen->info.has_indirect_compute_dispatch)
-			return 450;
+			return param == PIPE_CAP_GLSL_FEATURE_LEVEL ?
+				450 : 440;
 		return 420;
 
-	case PIPE_CAP_GLSL_FEATURE_LEVEL_COMPATIBILITY:
-		return 400;
-
 	case PIPE_CAP_MAX_TEXTURE_BUFFER_SIZE:
 		return MIN2(sscreen->info.max_alloc_size, INT_MAX);
 
-- 
2.18.0

